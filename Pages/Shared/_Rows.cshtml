@model LibraryManagementSystemHtmx.Models.TableData;

@if (@Model.Rows.Count == 0) 
{
  <tr>
    <td colspan="4">No results found.</td>
  </tr>
}
else
{
  @foreach (var row in @Model.Rows)
  {
    var rowValues = @Model.GetRowValues(row.Id);
    <tr>
      @foreach (var item in rowValues)
      {
        <td>@item</td>
      }
      <td class="has-text-right">
        <div class="d-flex justify-content-end">
          <button
            hx-get="@Url.Page("", "OpenEditModal", new { rowId = row.Id })" 
            hx-target="#modals-here" 
            hx-trigger="click"
            data-bs-toggle="modal"
            data-bs-target="#modals-here"
            class="btn btn-primary"
          >
            Edit
          </button>

          <form
            method="post"
            hx-post="@Url.Page("", "DeleteAction", new { rowId = row.Id })"
            hx-trigger="click"
            hx-swap="innerHTML"
            hx-target="body"
            class="ml-4"
          >
            <button
              type="submit"
              class="btn btn-danger"
            >
              Delete
            </button>
          </form>
        </div>
        <div 
          id="modals-here"
          class="modal modal-blur fade"
          style="display: none"
          aria-hidden="false"
          tabindex="-1"
        >
          <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
              <div class="modal-content">
              </div>
          </div>
        </div>
      </td>
    </tr>
  }
}